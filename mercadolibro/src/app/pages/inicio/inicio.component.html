<main>
  <div class="div__login">
    <h1>Bienvenido</h1>




    <form class="needs-validation" id="login" [formGroup]="loginFormulario" (ngSubmit)="onEnviar($event)">




      <div class="div__login-input">
        <input type="email" class="form__input form-control" id="email" name="email" required placeholder="Email"
          formControlName="email">
        <label for="floatingInput">Email</label>
        @if (Email?.errors && Email?.touched) {

        @if (Email?.hasError('required'))
        {
        <p class="text-danger">
          El email es requerido.
        </p>
        }
        @else if (Email?.hasError('email'))
        {
        <p class="text-danger">
          El formato del email debe ser válido.
        </p>
        }
        }
      </div>


      <div class="div__login-input">
        <input type="password" class="form__input form-control" id="contrasena" required minlength="4" maxlength="16"
          placeholder="Contraseña" formControlName="contrasenia">
        <label for="floatingPassword">Contraseña</label>

        @if(Contrasenia?.errors && Contrasenia?.touched)
        {
        @if(Contrasenia?.hasError('required'))
        {
        <p class="text-danger">
          La contraseña es requerida.
        </p>
        }
        @else if (Contrasenia?.hasError('minlength') )
        {
        <p class="text-danger">
          La contraseña requiere como mínimo 8 caracteres.
        </p>
        }
        }
      </div>

      <div class="div-botones">
        <button class="buton nav-link" type="submit">ingresar</button>
        <a class="registarse btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">registrarse</a>
      </div>
    </form>
  </div>


  <!-- Modal de Registro -->
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header bg-dark">
          <h1 class="modal-title fs-5 fw-bold" id="exampleModalLabel">Registro</h1>
          <button type="button" class="btn-close text-white bg-white nav-link" data-bs-dismiss="modal"
            aria-label="Close"></button>
        </div>
        <form class="needs-validation" id="registro" [formGroup]="registroFormulario"
          (ngSubmit)="enviarDatosRegistro($event)" novalidate>
          <div class="modal-body">
            <div class="col">
              <label class="form-label">Nombre</label>
              <input type="text" class="form-control" id="registroUsuario" minlength="3" maxlength="24"
                formControlName="nombreRegistro" required>
              <div class="form-text" id="basic-addon4">Solo letras entre 3 y 24 dígitos.</div>
              <div *ngIf="NombreRegistro?.errors && NombreRegistro?.touched" class="invalid-feedback">
                Debe respetar el formato.
              </div>
              <br>
            </div>

            <div class="col">
              <label class="form-label">Email</label>
              <input class="form-control" type="email" id="registroCorreo" formControlName="emailRegistro" required>
              <div *ngIf="EmailRegistro?.errors && EmailRegistro?.touched" class="invalid-feedback">
                Debe tener formato de email válido.
              </div>
            </div><br>

            <div class="col">
              <label class="form-label">Contraseña</label>
              <input type="password" class="form-control" id="registroContrasena" minlength="8"
                formControlName="contraseniaRegistro" required>
              <div *ngIf="ContraseniaRegistro?.errors && ContraseniaRegistro?.touched" class="invalid-feedback">
                La contraseña debe tener al menos 8 caracteres.
              </div>
              <br>

              <label class="form-label">Repite contraseña</label>
              <input type="password" class="form-control" id="registroContrasenaRepetir" minlength="8"
                formControlName="repetirContrasenia" required>
              <div *ngIf="RepetirContrasenia?.errors && RepetirContrasenia?.touched" class="invalid-feedback">
                Las contraseñas deben coincidir.
              </div>
            </div>
          </div>
          <div class="modal-footer bg-dark">
            <input type="submit" class="btn btn-warning fw-semibold" value="Registrarse"
              [disabled]="!registroFormulario.valid">
            <div class="alert alert-success" id="alertaOk" role="alert" style="display: none;">
              ¡Registro realizado exitosamente!
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</main>